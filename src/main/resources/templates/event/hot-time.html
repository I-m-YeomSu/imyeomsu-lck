<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<style>

</style>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Landing page template built with HTML and Bootstrap 4 for presenting training courses, classes, workshops and for convincing visitors to register using the form.">
    <meta name="author" content="Inovatik">

    <!-- OG Meta Tags to improve the way the post looks when you share the page on LinkedIn, Facebook, Google+ -->
    <meta property="og:site_name" content="" /> <!-- website name -->
    <meta property="og:site" content="" /> <!-- website link -->
    <meta property="og:title" content=""/> <!-- title shown in the actual shared post -->
    <meta property="og:description" content="" /> <!-- description shown in the actual shared post -->
    <meta property="og:image" content="" /> <!-- image link, make sure it's jpg -->
    <meta property="og:url" content="" /> <!-- where do you want your post to link to -->
    <meta property="og:type" content="article" />

    <!-- Website Title -->
    <title>imyeomsu - hot time event</title>

    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,600,700,700i&display=swap" rel="stylesheet">
    <link href="../css/bootstrap.css" rel="stylesheet">
    <link href="../css/fontawesome-all.css" rel="stylesheet">
    <link href="../css/swiper.css" rel="stylesheet">
    <link href="../css/magnific-popup.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">
    <link href="../css/wooristyle.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/main-reactive.css">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/moonspam/NanumSquare@2.0/nanumsquare.css">

    <!-- Favicon  -->
    <link rel="icon" href="/images/logo/apple-icon.png">
</head>
<body data-spy="scroll" data-target=".fixed-top">

<!-- Preloader -->
<div class="spinner-wrapper">
    <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
    </div>
</div>
<!-- end of preloader -->



<div th:insert="~{fragments/nav/template-nav :: template-nav}" class="replaceAttribute"></div>


<!-- Header -->
<header id="header" class="header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="text-container">

                    <h1>HOT TIME EVENT</h1>
                    <p class="p-large">매달 1일 저녁 8시 누르기만 하면 혜택이 쏟아진다!</p>
                </div> <!-- end of text-container -->
            </div> <!-- end of col -->
        </div> <!-- end of row -->
    </div> <!-- end of container -->

    <!-- Image Slider -->
    <div class="outer-container">
        <div class="slider-container">
            <div class="swiper-container image-slider-1">
                <div class="swiper-wrapper">
                    <!-- Slide -->
                    <div class="swiper-slide" >
                        <img class="img-fluid" src="../images/lck-hot-01.png" style="width: 1100px; height: 500px" alt="alternative">
                    </div>
                    <!-- end of slide -->

                    <!-- Slide -->
                    <div class="swiper-slide">
                        <img style="width: 1100px; height: 500px" class="img-fluid" src="../images/lck-hot-02.png" alt="alternative">
                    </div>
                    <!-- end of slide -->

                    <!-- Slide -->
                    <div class="swiper-slide">
                        <img class="img-fluid" src="../images/lck-hot-03 (1).png" style="width: 1100px; height: 500px" alt="alternative">
                    </div>
                    <!-- end of slide -->

                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
                <!-- end of add arrows -->

            </div> <!-- end of swiper-container -->
        </div> <!-- end of slider-container -->
    </div> <!-- end of outer-container -->
    <!-- end of image slider -->

</header> <!-- end of header -->
<!-- end of header -->

<!-- Video -->
<div class="basic-4" style="margin-top: 200px; background-color: #FFFFFF">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h2>Hot Time Event</h2>

                <div style="width: 100%; height: 300px; background-image: url('https://img.tf.co.kr/article/home/2024/04/14/202485571713095820.jpg'); background-size: cover;">
                    <!-- Video Preview, 링크는 이후에 마음대로 추가 -->
                    <div class="image-container center" style="margin: 0 auto">
                        <a class="popup-youtube" href="https://www.youtube.com/watch?v=yxJQccavKO4" data-effect="fadeIn">
                            <span class="video-play-button"
                                  style="top: 230px;"
                            ></span>
                        </a>
                    </div> <!-- end of image-container -->

                </div>

            </div> <!-- end of col -->
        </div> <!-- end of row -->
    </div> <!-- end of container -->
</div> <!-- end of basic-4 -->
<!-- end of video -->


<div class="appWrap mt-0"  style="display: flex;
                                  justify-content: center;
                                  align-items: flex-end; background-image: url('https://static.gosugamers.net/d2/f4/b8/d94fa86b605565de707de437442c4bff065d1648ef06dc0ca15cef3312.webp?w=1080'); background-size: cover;">
    <div class="appCon text-right">
        <p class="title">
            지금 당장 타임어택! <br>
            매달 1일 저녁 8시 1시간 동안<br>
            최고의 보상을 얻어보세요.</p>
        <span class="sub"> <strong>매달 1일 쿠폰 지급 버튼이 열립니다.</strong></span>
    </div>

<!--    <button class="btn btn-lg btn-close-white align-content-center hover-bg-gray" id="monthlyButton" style="display:none;position: absolute;-->
<!--            bottom: 20px; color: #2e3339;" onclick="hotTimeEvent()">보상 받기!</button>-->
    <button class="btn btn-lg btn-close-white align-content-center hover-bg-gray" id="monthlyButton" style="position: absolute; bottom: 20px; color: #2e3339;"
            th:if="${#temporals.day(localDate)} eq 7"
            onclick="hotTimeEvent()">보상 받기!</button>

    <div id="isParticipated" th:text="${isParticipated}"></div>
    <div id="flag" th:text="${flag}"></div>


</div>



<!-- Newsletter -->
<div class="form-2" style="background-color: #FFFFFF">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h3>자세한 내용은 이벤트 공지를 참고하세요.</h3>

            </div> <!-- end of col -->
        </div> <!-- end of row -->
    </div> <!-- end of container -->
</div> <!-- end of form-2 -->
<!-- end of newsletter -->




<div th:replace="~{fragments/footer/template-footer :: template-footer}" class="replaceAttribute"></div>
<div th:replace="~{fragments/footer/template-copyright :: template-copyright}" class="replaceAttribute"></div>



<!-- Scripts -->
<script src="../js/jquery.min.js"></script> <!-- jQuery for Bootstrap's JavaScript plugins -->
<script src="../js/popper.min.js"></script> <!-- Popper tooltip library for Bootstrap -->
<script src="../js/bootstrap.min.js"></script> <!-- Bootstrap framework -->
<script src="../js/jquery.countdown.min.js"></script> <!-- The Final Countdown plugin for jQuery -->
<script src="../js/swiper.min.js"></script> <!-- Swiper for image and text sliders -->
<script src="../js/jquery.magnific-popup.js"></script> <!-- Magnific Popup for lightboxes -->
<script src="../js/validator.min.js"></script> <!-- Validator.js - Bootstrap plugin that validates forms -->
<script src="../js/scripts.js"></script> <!-- Custom scripts -->

<script src="../js/jquery-3.6.0.min.js"></script>
<script src="../js/main.js"></script>

<script>

        // function hotTimeEvent() {
        //
        //     var monthlyButton = document.getElementById('monthlyButton');
        //     var userId = monthlyButton.getAttribute('data-userId');
        //     var isParticipated = document.getElementById('isParticipated').textContent; // 참여 유무 정보
        //     var flag = document.getElementById('isParticipated');
        //
        //     $.ajax({
        //         type: "GET",
        //         url: "/event/click", // Java 컨트롤러의 URL
        //         contentType: "application/json",
        //
        //         success: function(response) {
        //             // 성공 시 서버에서 받은 응답을 alert 창에 출력
        //             flag.innerText=""
        //             flag.innerText= "쿠폰 발급 완료!"
        //         },
        //         error: function(jqXHR, textStatus, errorThrown) {
        //             // 에러 시 처리
        //             var userHeader = jqXHR
        //
        //             alert("에러 발생: " + jqXHR.getResponseHeader("user"));
        //
        //         }
        //     });
        // }
        function hotTimeEvent() {
            var monthlyButton = document.getElementById('monthlyButton');
            var isParticipated = document.getElementById('isParticipated').textContent; // 참여 유무 정보
            var flag = document.getElementById('isParticipated');

            $.ajax({
                type: "GET",
                url: "/event/click",
                contentType: "application/json",
                success: function(response) {
                    // 성공 시 서버에서 받은 응답을 출력
                    console.log("서버 응답:", response);
                    // 받은 응답을 파싱하여 원하는 작업을 수행
                    flag.innerText = "쿠폰 발급 완료!";
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    // 에러 시 처리
                    if (jqXHR.status === 401) {
                        // 인증되지 않은 사용자일 경우 에러 메시지 출력
                        var errorResponse = JSON.parse(jqXHR.responseText);
                        var errorMessage = errorResponse.error;
                        alert(errorMessage);
                    } else {
                        // 그 외의 에러 처리
                        alert(textStatus);
                    }
                }
            });
        }


</script>
</body>
</html>